CREATE SCHEMA Chal;
GO
-- DROP TABLE Chal.Orders;
CREATE TABLE Chal.Orders (
    ID INT NOT NULL PRIMARY KEY,
    ProductID INT NOT NULL,
    CustomerID INT NOT NULL
);
SELECT * FROM Chal.Orders;

ALTER TABLE Chal.Orders
ADD CONSTRAINT FK_OrderProduct
FOREIGN KEY (ProductID) REFERENCES Chal.Products(ID);

ALTER TABLE Chal.Orders
ADD CONSTRAINT FK_OrderCustomer
FOREIGN KEY (CustomerID) REFERENCES Chal.Customers(ID);


-- DROP TABLE Chal.Products
CREATE TABLE Chal.Products (
    ID INT NOT NULL PRIMARY KEY,
    Name NVARCHAR(150) NOT NULL,
    Price MONEY NOT NULL
);

SELECT * FROM Chal.Products;


-- DROP TABLE Chal.Customers
CREATE TABLE Chal.Customers (
    ID INT NOT NULL PRIMARY KEY,
    Firstname NVARCHAR(100) NOT NULL,
    Lastname NVARCHAR(100) NOT NULL,
    CardNumber INT NULL
);
SELECT * FROM Chal.Customers;


-- ^ DDL
-- v DML
-- ADD 3 records
INSERT INTO Chal.Customers VALUES (1, 'Daniel', 'Grant', 001);
INSERT INTO Chal.Customers VALUES (2, 'Danny', 'Grant', 002);
INSERT INTO Chal.Customers VALUES (3, 'Dan', 'Grant', 003);
SELECT * FROM Chal.Customers;

INSERT INTO Chal.Products VALUES (1, 'Lamp', 100);
INSERT INTO Chal.Products VALUES (2, 'Water Bottle', 50);
INSERT INTO Chal.Products VALUES (3, 'Pencil', 10);
SELECT * FROM Chal.Products;

INSERT INTO Chal.Orders VALUES (1, 2, 3);
INSERT INTO Chal.Orders VALUES (2, 1, 1);
INSERT INTO Chal.Orders VALUES (3, 3, 2);
SELECT * FROM Chal.Orders;

-- Add Iphone for 200
INSERT INTO Chal.Products VALUES(4, 'iPhone', 200);
SELECT * FROM Chal.Products;

-- Add Tina Smith
INSERT INTO Chal.Customers VALUES (4, 'Tina', 'Smith', 004);
SELECT * FROM Chal.Customers;

-- Create Order Tina Smith bought Iphone
INSERT INTO Chal.Orders VALUES (4, 4, 4);
INSERT INTO Chal.Orders VALUES (5, 2, 4);
SELECT * FROM Chal.Orders;

-- Report all orders by Tina Smith
SELECT * FROM Chal.Orders WHERE (CustomerID = 4);

-- Report all revenue generated by sales of iPhone
SELECT p.Price, p.Name, SUM()
FROM 

SELECT * FROM Chal.Products;
SELECT * FROM Chal.Orders;

-- Increase Price of iPhone to 250
UPDATE Chal.Products 
SET Price = 250 
WHERE ID = 4;